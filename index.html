<!DOCTYPE html>
<html>
<head>
    <title>Hazard Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Load Supabase BEFORE main.js so window.supabase is available -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <h1 class="site-title">Balaot</h1>

        <!-- Theme toggle (top-right) -->
        <button id="theme-toggle" class="theme-toggle" aria-pressed="false" title="Toggle light/dark mode">ðŸŒ™</button>

        <!-- Tabs moved to the top header area -->
        <nav class="tabs" aria-label="Top header tabs">
            <div class="tab-buttons" role="tablist" aria-label="Top sections">
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="tab-hazards" id="tab-btn-hazards">Hazards</button>
                <button class="tab-button active" role="tab" aria-selected="true" aria-controls="tab-who" id="tab-btn-who">Who we are</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="tab-updates" id="tab-btn-updates">Site Updates</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="tab-disclaimer" id="tab-btn-disclaimer">Disclaimer</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="tab-instructions" id="tab-btn-instructions">Instructions</button>
            </div>
        </nav>
    </header>

    <div class="container">
        <aside class="sidebar">
            <!-- Tab panels for the header tabs (content shown in the sidebar) -->
            <div class="tab-panels">
                <div id="tab-hazards" class="tab-panel hazard-panel" role="tabpanel" aria-labelledby="tab-btn-hazards" hidden>
                    <h3>Hazard List</h3>
                    <div class="hazard-list" id="hazard-list">
                        <!-- hazard items will be shown here -->
                        <p class="muted">No hazards listed yet.</p>
                    </div>
                </div>

                <div id="tab-who" class="tab-panel" role="tabpanel" aria-labelledby="tab-btn-who">
                    <h3>Who we are</h3>
                    <p>This website was created by the group BLOOMS as a final project requirement for Env Sci WFW, 1st Sem, AY â€˜25-â€™26. The goal of this project is to make a community-sustained hazard map for UP Diliman to encourage students and community-goers alike to safely travel through the campus on foot, therefore reducing their collective carbon footprint. We, members of BLOOMS, hope that you, the user, would find this website helpful and use it for its intended purpose. Thank you and stay safe!</p>
                </div>

                <div id="tab-updates" class="tab-panel" role="tabpanel" aria-labelledby="tab-btn-updates" hidden>
                    <h3>Site Updates</h3>
                    <ul>
                        <li>2025-11-21 â€” Added pin naming and landmark lookup.</li>
                        <li>2025-11-21 â€” Moved pin list below the map.</li>
                    </ul>
                </div>

                <div id="tab-disclaimer" class="tab-panel" role="tabpanel" aria-labelledby="tab-btn-disclaimer" hidden>
                    <h3>Disclaimer</h3>
                    <p>The data shown is for demonstration only. Overpass and Nominatim lookups are subject to external service availability and may be rate-limited.</p>
                </div>
                <div id="tab-instructions" class="tab-panel" role="tabpanel" aria-labelledby="tab-btn-instructions" hidden>
                    <h3>Instructions</h3>
                    <ul>
                        <li><strong>Add a pin:</strong> Click anywhere inside the campus bounds on the map and enter a name. The pin appears in the Hazards list.</li>
                        <li><strong>Rename a pin:</strong> Doubleâ€‘click the marker on the map and enter the new name.</li>
                        <li><strong>Locate a pin:</strong> Click its entry in the Hazards list to center the map and open its popup.</li>
                        <li><strong>Delete a pin:</strong> Press the âœ• button in its list row and confirm.</li>
                        <li><strong>Nearest landmark:</strong> After adding a pin the app queries OpenStreetMap; results show under the pin name once resolved.</li>
                        <li><strong>Theme toggle:</strong> Use the moon/sun button (top right) to switch dark/light modes; your choice is saved.</li>
                        <li><strong>Persistence:</strong> Pins are saved locally; reloading the page restores them automatically.</li>
                        <li><strong>Bounds:</strong> Pins can only be placed within the defined UP Diliman boundary; clicks outside are rejected.</li>
                        <li><strong>Accessibility:</strong> You can focus list items with Tab and press Enter/Space to activate tabs.</li>
                    </ul>
                </div>
            </div>
        </aside>

        <main class="map-container">
            <div id="map"></div>
        </main>
    </div>

    <footer>
        <p>Â© 2025 Hazard Map Project</p>
    </footer>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script defer src="main.js"></script>
</body>
</html>
